CREATE TABLE `schema_info` (
  `version` integer DEFAULT (0) NOT NULL);
CREATE TABLE `cards` (
  `id` integer NOT NULL,
  `front` text NOT NULL,
  `back` text NOT NULL,
  `deck_id` integer REFERENCES `decks`(`id`),
  PRIMARY KEY (`id`));

CREATE TABLE "deck_grants" (
  `id` integer NOT NULL,
  `user_id` integer REFERENCES `users`(`id`),
  `deck_id` integer REFERENCES `decks`(`id`),
  `read` boolean DEFAULT (0),
  `write` boolean DEFAULT (0),
  `owns` boolean, PRIMARY KEY (`id`));

CREATE TABLE `user_card_data` (
  `id` integer NOT NULL,
  `user_id` integer REFERENCES `users`(`id`),
  `card_id` integer REFERENCES `cards`(`id`),
  `strength` integer NOT NULL,
  `due_date` timestamp NOT NULL,
  PRIMARY KEY (`id`));

CREATE TABLE `decks`(
  `id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY,
  `name` text DEFAULT (NULL) NOT NULL);

CREATE TABLE `users`(
  `id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY,
  `email` text DEFAULT (NULL) NOT NULL,
  `name` text DEFAULT (NULL) NULL,
  `password` varchar(255), UNIQUE (`email`));
